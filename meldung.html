<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Meldung eines IT-Sicherheitsvorfalls</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    .form-section { display: none; }
    label, input, textarea, button {
      display: block;
      width: 100%;
      margin-top: 15px;
    }
    textarea {
      resize: vertical;
    }
  </style>
</head>
<body>
  <header class="header">
    <img src="logo-bsi-smaller.svg" alt="BSI Logo" class="logo" />
    <div class="header-text">Bundesamt für Sicherheit in der Informationstechnik</div>
  </header>

  <main class="container">
    <h2 id="formTitle">Meldung</h2>

    <!-- FRÜHWARNUNG FORMULAR (untereinander) -->
    <form id="fruehwarnungForm" class="form-section">
      <p>Dieses Formular dient zur Frühwarnung über einen potenziell schwerwiegenden IT-Sicherheitsvorfall gemäß §30 BSIG (NIS2). Bitte füllen Sie die Felder sorgfältig aus.</p>

      <label for="unternehmen">Unternehmen</label>
      <input type="text" id="unternehmen" name="unternehmen" required />

      <label for="kontakt">Kontaktperson (Name, Abteilung, E-Mail, Telefon)</label>
      <textarea id="kontakt" name="kontakt" rows="3" required></textarea>

      <label for="zeitpunkt">Datum & Uhrzeit der Entdeckung</label>
      <input type="datetime-local" id="zeitpunkt" name="zeitpunkt" required />

      <label for="standorte">Betroffene Standorte</label>
      <input type="text" id="standorte" name="standorte" required />

      <label for="systeme">Betroffene Systeme oder Dienste</label>
      <textarea id="systeme" name="systeme" rows="3" required></textarea>

      <label for="art">Art des Vorfalls (z. B. Ransomware, DDoS)</label>
      <input type="text" id="art" name="art" required />

      <label for="ursache">Erste Auffälligkeiten / Symptome</label>
      <textarea id="ursache" name="ursache" rows="3"></textarea>

      <label for="massnahmen">Bereits ergriffene Maßnahmen</label>
      <textarea id="massnahmen" name="massnahmen" rows="3"></textarea>

      <label for="auswirkungen">Einschätzung der Auswirkungen</label>
      <textarea id="auswirkungen" name="auswirkungen" rows="3"></textarea>

      <button type="submit">Frühwarnung übermitteln & PDF generieren</button>
    </form>

    <!-- FOLGEMELDUNG FORMULAR (neu) -->
    <form id="folgemeldungForm" class="form-section">
      <p>Dieses Formular dient zur Ergänzung der Frühwarnung mit detaillierten Informationen zum IT-Sicherheitsvorfall.</p>

      <label for="fm_vorfallID">Referenz zur Erstmeldung (Vorfall-ID)</label>
      <input type="text" id="fm_vorfallID" name="fm_vorfallID" required />

      <label for="fm_beschreibung">Genaue Beschreibung des Vorfalls</label>
      <textarea id="fm_beschreibung" name="fm_beschreibung" rows="4" required></textarea>

      <label for="fm_systeme">Art und Umfang der betroffenen Systeme/Dienste</label>
      <textarea id="fm_systeme" name="fm_systeme" rows="3"></textarea>

      <label for="fm_timeline">Zeitlicher Ablauf (Timeline des Vorfalls)</label>
      <textarea id="fm_timeline" name="fm_timeline" rows="3"></textarea>

      <label for="fm_analyse">Technische Analyse (sofern vorhanden)</label>
      <textarea id="fm_analyse" name="fm_analyse" rows="3"></textarea>

      <label for="fm_ursache">Vermutete Ursache bzw. Angriffsvektor</label>
      <textarea id="fm_ursache" name="fm_ursache" rows="3"></textarea>

      <label for="fm_auswirkungen">Aktuelle Auswirkungen auf Betrieb, Kunden, Daten</label>
      <textarea id="fm_auswirkungen" name="fm_auswirkungen" rows="3"></textarea>

      <label for="fm_massnahmen">Bereits ergriffene oder geplante Maßnahmen</label>
      <textarea id="fm_massnahmen" name="fm_massnahmen" rows="3"></textarea>

      <label for="fm_kommunikation">Kommunikationsmaßnahmen (intern/extern)</label>
      <textarea id="fm_kommunikation" name="fm_kommunikation" rows="3"></textarea>

      <button type="submit">Folgemeldung übermitteln & PDF generieren</button>
    </form>
  </main>

  <script>
    const params = new URLSearchParams(window.location.search);
    const type = params.get("type");

    const titleMap = {
      fruehwarnung: "Frühwarnung",
      folgemeldung: "Folgemeldung",
      zwischenbericht: "Zwischenbericht",
      fortschritt: "Fortschrittsbericht",
      abschluss: "Abschlussbericht"
    };

    if (type && document.getElementById(`${type}Form`)) {
      document.getElementById(`${type}Form`).style.display = "block";
      document.getElementById("formTitle").textContent = `Meldung – ${titleMap[type]}`;
    } else {
      document.getElementById("formTitle").textContent = "Unbekannter Meldetyp";
    }
  </script>
</body>
</html>

